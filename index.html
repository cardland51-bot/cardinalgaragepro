<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1,user-scalable=no" />
<title>HeroHUD ‚Ä¢ Upload ‚Üí Analyze ‚Üí Send</title>
<meta name="theme-color" content="#0b1b16" />
<style>
:root{
  --bg-top:#0b1b16;--bg-bot:#06121a;
  --mintL:#9CFFE0;--mint:#34D1A0;--aqua:#2FB0E9;--teal:#0E8B67;
  --text:#E9FFF6;--textDim:rgba(233,255,246,.85);
  --glass:rgba(255,255,255,0.06);--stroke:rgba(156,255,224,0.28);
  --warn:#f6bf3a;
}
html,body{margin:0;height:100%;background:linear-gradient(180deg,var(--bg-top),var(--bg-bot));
  color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;overflow-x:hidden}
*{box-sizing:border-box;user-select:none;-webkit-user-select:none;-webkit-touch-callout:none}
.btn{appearance:none;border:1px solid var(--mint);background:var(--glass);color:var(--mintL);
  padding:.85rem 1.4rem;border-radius:999px;letter-spacing:.08em;text-transform:uppercase;font-weight:700;
  backdrop-filter:blur(6px);cursor:pointer;transition:box-shadow .2s,transform .1s,opacity .2s;
  box-shadow:0 0 16px rgba(156,255,224,.14);font-size:13px;margin:4px}
.btn:hover{box-shadow:0 0 26px rgba(156,255,224,.45)}
.pill{border:1px solid var(--stroke);background:var(--glass);color:var(--text);cursor:pointer;border-radius:999px;
  padding:.45rem .85rem;font-size:12px}
.topbar{position:fixed;inset:0 0 auto 0;height:56px;display:flex;align-items:center;justify-content:space-between;
  padding:0 12px;background:rgba(0,0,0,.4);border-bottom:1px solid var(--stroke);z-index:40}
.brand{font-weight:900;letter-spacing:.08em;color:var(--mintL)}
main{padding-top:70px;text-align:center}
.row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
#preview{display:none;position:relative;width:min(94vw,980px);aspect-ratio:16/10;border-radius:16px;overflow:hidden;
  border:1px solid var(--stroke);margin:12px auto;box-shadow:0 0 24px rgba(156,255,224,.14)}
#preview img,#preview video{width:100%;height:100%;object-fit:cover}
#edgeGlow{position:absolute;inset:0;border-radius:16px;pointer-events:none;opacity:0;
  box-shadow:0 0 28px rgba(156,255,224,.6),inset 0 0 18px rgba(14,139,103,.55);transition:opacity .25s}
.glow-on #edgeGlow{opacity:1}
#tips{width:min(94vw,980px);margin:10px auto}
.tip{opacity:0;transform:translateY(8px);transition:all .5s cubic-bezier(.2,.9,.2,1);
  background:rgba(255,255,255,.06);border:1px solid var(--stroke);backdrop-filter:blur(8px);
  color:var(--text);padding:.55rem .75rem;border-radius:10px;margin:.35rem auto;max-width:92%}
.tip.show{opacity:1;transform:translateY(0)}
#panel{display:none;width:min(94vw,980px);margin:12px auto;padding:10px;border:1px solid var(--stroke);
  border-radius:14px;background:rgba(255,255,255,.05);backdrop-filter:blur(6px)}
.kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.k{border:1px solid var(--stroke);border-radius:12px;padding:10px;background:rgba(255,255,255,.04);
  display:flex;gap:10px;align-items:center}
.k .i{font-size:18px}.k .v{font-weight:800}.k .s{font-size:12px;color:var(--textDim)}
@media(max-width:720px){.kpis{grid-template-columns:1fr}}
#voiceOrb{position:fixed;left:18px;bottom:88px;width:56px;height:56px;border-radius:999px;border:1px solid var(--mint);
  background:radial-gradient(circle at 60% 40%,rgba(156,255,224,.25),rgba(47,176,233,.12));
  box-shadow:0 0 16px rgba(156,255,224,.25);display:grid;place-items:center;z-index:45}
#voiceOrb.speaking{box-shadow:0 0 20px rgba(156,255,224,.45),0 0 28px rgba(47,176,233,.35)}
#talkBtn{position:fixed;right:18px;bottom:128px}
#stopBtn{position:fixed;right:18px;bottom:80px;border-color:var(--warn);color:var(--warn)}
.footer{position:fixed;left:50%;transform:translateX(-50%);bottom:14px;font-size:12px;color:rgba(233,255,246,.7);
  letter-spacing:.12em;text-transform:uppercase}
#bootVeil{position:fixed;inset:0;background:#03100c;z-index:90;display:flex;align-items:center;justify-content:center;
  flex-direction:column;color:var(--mintL)}
#garage{display:none;position:fixed;inset:0;z-index:100;background:rgba(0,0,0,.85);color:var(--text)}
.garage-box{position:absolute;inset:6% 6%;border:1px solid var(--stroke);background:#0e1815;border-radius:16px;
  display:flex;flex-direction:column;box-shadow:0 0 40px rgba(0,0,0,.55);overflow:hidden}
.gar-head{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-bottom:1px solid var(--stroke)}
.gar-body{flex:1;overflow-y:auto;padding:20px}
.tier{border:1px solid var(--stroke);border-radius:12px;padding:12px;margin-bottom:14px;background:rgba(255,255,255,.04)}
.tier h3{margin:0;color:var(--mintL)}
.tier p{margin:6px 0;color:var(--textDim)}
</style>
</head>
<body>
<div class="topbar">
  <div class="brand">HeroHUD</div>
  <div class="menu"><button class="pill" id="btnGarage">üö™ Garage</button></div>
</div>

<main>
  <div class="row">
    <button class="btn" id="btnCamera">üì∑ Camera</button>
    <button class="btn" id="btnUpload">‚¨Ü Upload</button>
    <button class="btn" id="btnAnalyze">üîç Analyze</button>
  </div>
  <div id="preview"><img id="previewImg"/><div id="edgeGlow"></div></div>
  <section id="panel">
    <div class="kpis">
      <div class="k"><div class="i">üí≤</div><div><div class="v" id="kCost">‚Äî</div><div class="s">Estimated Cost</div></div></div>
      <div class="k"><div class="i">‚ö†Ô∏è</div><div><div class="v" id="kRisk">‚Äî</div><div class="s">Risk Factors</div></div></div>
      <div class="k"><div class="i">üìà</div><div><div class="v" id="kUpsell">‚Äî</div><div class="s">Upsell Opportunities</div></div></div>
    </div>
  </section>
  <div id="tips"></div>
</main>

<button id="talkBtn" class="btn">üí¨ Talk to Addie</button>
<button id="stopBtn" class="btn">‚õî Stop</button>
<div id="voiceOrb" title="Voice Status"></div>
<div class="footer">Powered by Cardinal-Garage_MND Inc.</div>

<div id="garage">
  <div class="garage-box">
    <div class="gar-head">
      <div style="font-weight:800;letter-spacing:.08em;color:var(--mintL)">Garage Access</div>
      <button class="pill" id="closeGarage">Close</button>
    </div>
    <div class="gar-body">
      <h2>Tiered Access Plans</h2>
      <div class="tier"><h3>üî∞ Basic</h3>
        <p>1 Free Demo ‚Ä¢ Basic photo estimate</p>
        <p>Ideal for first-time users testing the HUD system.</p>
      </div>
      <div class="tier"><h3>üíé Unlimited</h3>
        <p>Unlimited analyses ‚Ä¢ Voice AI & export access</p>
        <p>For contractors running full daily estimates.</p>
      </div>
      <div class="tier"><h3>üöÄ Pro</h3>
        <p>Unlimited + Sales Logic ‚Ä¢ Export Logs ‚Ä¢ Addie Coaching</p>
        <p>Includes advanced AI sales insight and upgrade logic training.</p>
      </div>

      <h2>Portals</h2>
      <ul>
        <li><a class="btn" href="./GarageMind_Founder_Black_Book_v1.2_InvestorPrintEdition.pdf" target="_blank">üìò Founder Black Book</a></li>
        <li><a class="btn" href="https://cardinal-systems-university.example.com" target="_blank">üè´ Sales University Portal</a></li>
        <li><a class="btn" href="https://docs.cardinal-systems.example.com" target="_blank">üìö Docs Portal</a></li>
      </ul>

      <h2>Exports</h2>
      <button class="btn" id="btnExport">üì§ Export Last Analysis</button>
      <button class="btn" id="btnLogs">üßæ Export Logs CSV</button>
    </div>
  </div>
</div>

<script>
(() => {
const API="https://jared-hero2-backend.onrender.com";
const PAYPAL_URL="https://www.paypal.com/ncp/payment/MVWW6VPEHJKKU";
const el={
 btnCamera:qs('#btnCamera'),btnUpload:qs('#btnUpload'),btnAnalyze:qs('#btnAnalyze'),
 preview:qs('#preview'),previewImg:qs('#previewImg'),edgeGlow:qs('#edgeGlow'),
 tips:qs('#tips'),panel:qs('#panel'),kCost:qs('#kCost'),kRisk:qs('#kRisk'),kUpsell:qs('#kUpsell'),
 talkBtn:qs('#talkBtn'),stopBtn:qs('#stopBtn'),voiceOrb:qs('#voiceOrb'),
 btnGarage:qs('#btnGarage'),garage:qs('#garage'),closeGarage:qs('#closeGarage'),
 btnExport:qs('#btnExport'),btnLogs:qs('#btnLogs')
};
const STATE={audioEnabled:false,analyzeCount:Number(localStorage.getItem('hero_analyzes')||0),speechQueue:[],speaking:false,logs:[]};
function qs(s){return document.querySelector(s);}
function tip(t){const d=document.createElement("div");d.className="tip";d.textContent=t;el.tips.appendChild(d);requestAnimationFrame(()=>d.classList.add("show"));}
function clearTips(){el.tips.innerHTML="";}
function setAnalyzes(n){STATE.analyzeCount=n;localStorage.setItem('hero_analyzes',String(n));}

/* Garage */
el.btnGarage.onclick=()=>el.garage.style.display='block';
el.closeGarage.onclick=()=>el.garage.style.display='none';

/* Exports */
el.btnExport.onclick=()=>{
  const last=STATE.logs[STATE.logs.length-1];if(!last)return alert("No analysis yet.");
  const blob=new Blob([JSON.stringify(last,null,2)],{type:"application/json"});
  const a=document.createElement("a");a.href=URL.createObjectURL(blob);a.download="HeroHUD_LastAnalysis.json";a.click();
};
el.btnLogs.onclick=()=>{
  if(!STATE.logs.length)return alert("No logs yet.");
  const csv="Date,Cost,Risks,Upsells\n"+STATE.logs.map(l=>[l.date,l.cost,l.risk,l.upsell].join(",")).join("\n");
  const blob=new Blob([csv],{type:"text/csv"});const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);a.download="HeroHUD_Logs.csv";a.click();
};

/* Speech */
let activeUtter=null;
function pickVoice(f=true){const v=speechSynthesis.getVoices();if(!v.length)return null;
 const us=v.filter(x=>x.lang.toLowerCase().includes("en-us"));
 const fList=["Google US English","Samantha","Jenny","Aria","Amelia","Sara","Coral"];
 const mList=["Daniel","Alex","Matthew","Guy"];
 return f?us.find(x=>fList.includes(x.name))||us[0]:us.find(x=>mList.includes(x.name))||us[0];
}
function speakQueued(text,{female=true,rate=1.1,pitch=1.25}={}){STATE.speechQueue.push({text,female,rate,pitch});processQueue();}
function processQueue(){if(STATE.speaking||!STATE.speechQueue.length||!STATE.audioEnabled)return;
 const {text,female,rate,pitch}=STATE.speechQueue.shift();speakNow(text,{female,rate,pitch,onend:()=>{STATE.speaking=false;processQueue();}});}
function speakNow(text,{female,rate,pitch,onend}={}){stopSpeech();try{
 const u=new SpeechSynthesisUtterance(text);const v=pickVoice(female);if(v)u.voice=v;u.rate=rate;u.pitch=pitch;
 u.onend=()=>{activeUtter=null;el.voiceOrb.classList.remove('speaking');onend&&onend();};
 activeUtter=u;STATE.speaking=true;el.voiceOrb.classList.add('speaking');speechSynthesis.speak(u);}catch{onend&&onend();}}
function stopSpeech(){try{if(activeUtter){speechSynthesis.cancel();activeUtter=null;}}catch{}el.voiceOrb.classList.remove('speaking');}
el.stopBtn.onclick=stopSpeech;

/* Hold-to-Talk */
let holdStart=0;
el.talkBtn.addEventListener('pointerdown',e=>{e.preventDefault();holdStart=Date.now();el.talkBtn.style.boxShadow="0 0 20px rgba(156,255,224,.6)";});
el.talkBtn.addEventListener('pointerup',e=>{
 e.preventDefault();el.talkBtn.style.boxShadow="";
 const held=Date.now()-holdStart;
 if(!STATE.audioEnabled){STATE.audioEnabled=true;speakQueued("Hi I'm Addie ‚Äî hold to talk and I'll coach your sales pitch.");return;}
 if(held>300){speakQueued("I'm listening. What do you need ‚Äî pricing, risk, or how to close the sale?");}
 else{speakQueued("Tap or hold to talk. Upload a photo and I‚Äôll help estimate it!");}
});

/* Camera */
el.btnCamera.onclick=async()=>{try{
 const s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:false});
 const v=document.createElement("video");v.srcObject=s;await v.play();el.preview.innerHTML="";el.preview.appendChild(v);el.preview.appendChild(el.edgeGlow);el.preview.style.display="block";
 const snap=document.createElement("div");snap.id="snapHint";snap.textContent="Tap video to snapshot";el.preview.appendChild(snap);
 v.onclick=()=>{const c=document.createElement("canvas");c.width=v.videoWidth;c.height=v.videoHeight;c.getContext("2d").drawImage(v,0,0);
 el.previewImg.src=c.toDataURL("image/jpeg",0.9);el.preview.innerHTML="";el.preview.appendChild(el.previewImg);el.preview.appendChild(el.edgeGlow);
 s.getTracks().forEach(t=>t.stop());tip("Snapshot captured ‚Äî tap Analyze.");};}
 catch{tip("Camera unavailable.");}};

/* Upload */
const fileInput=document.createElement("input");fileInput.type="file";fileInput.accept="image/*";
el.btnUpload.onclick=()=>fileInput.click();
fileInput.onchange=()=>{const f=fileInput.files[0];if(!f)return;const url=URL.createObjectURL(f);
 el.previewImg.src=url;el.preview.style.display="block";tip("Photo ready ‚Äî tap Analyze.");};

/* Analyze */
function canAnalyze(){return STATE.analyzeCount<1;}
function showPaywall(){const o=document.createElement("div");o.style="position:fixed;inset:0;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:9999;";
 o.innerHTML=`<div style="background:#0f1916;padding:1rem 1.4rem;border-radius:16px;border:1px solid var(--stroke);text-align:center;max-width:480px">
 <h3 style="color:var(--mintL)">Access Limit Reached</h3>
 <p>You‚Äôve finished your demo. Upgrade for unlimited analyses or Pro-level AI sales logic.</p>
 <a class='btn' href='${PAYPAL_URL}' target='_blank'>Upgrade</a>
 <button class='btn' id='closePay'>Close</button></div>`;
 document.body.appendChild(o);o.querySelector('#closePay').onclick=()=>o.remove();
}
el.btnAnalyze.onclick=async()=>{
 if(!el.previewImg.src){tip("Upload or capture first.");return;}
 if(!canAnalyze()){showPaywall();return;}
 clearTips();el.preview.classList.add("glow-on");
 speakQueued("Analyzing photo...",{female:false,rate:0.95});
 try{
  const fd=new FormData();const b=await fetch(el.previewImg.src).then(r=>r.blob());fd.append("file",b,"upload.jpg");
  const r=await fetch(API+"/analyze-image",{method:"POST",body:fd});const d=await r.json();
  const cost=d.cost||"$"+Math.round((d.summary||"").length*2.2);
  const risk=(d.risks||["Low"]).join(", ");
  const ups=(d.upsells||["Edging","Mulch color"]).join(", ");
  el.kCost.textContent=cost;el.kRisk.textContent=risk;el.kUpsell.textContent=ups;el.panel.style.display="block";
  STATE.logs.push({date:new Date().toLocaleString(),cost,risk,upsell:ups});
  tip(d.summary||"Analysis complete.");tip(d.recommendation||"Standard prep suggested.");
  speakQueued(d.summary||"Analysis complete.");setAnalyzes(STATE.analyzeCount+1);
 }catch{tip("Analysis failed.");}finally{el.preview.classList.remove("glow-on");}
};
})();
</script>
</body>
</html>






